!function(i){var e={};function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return i[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=i,t.c=e,t.d=function(i,e,n){t.o(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:n})},t.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,e){if(1&e&&(i=t(i)),8&e)return i;if(4&e&&"object"==typeof i&&i&&i.__esModule)return i;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&e&&"string"!=typeof i)for(var o in i)t.d(n,o,function(e){return i[e]}.bind(null,o));return n},t.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(e,"a",e),e},t.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)},t.p="",t(t.s=0)}([function(i,e,t){"use strict";t.r(e);t(1);!function(i){document.addEventListener("DOMContentLoaded",(function(){e.init()})),window.addEventListener("load",(function(){}));let e={init(){this.isFirstRun=!0,document.querySelector("body").classList.contains("woocommerce-checkout")&&(this.createFields(),i(document).on("change","#billing_country, #shipping_country",this.toggleCityField.bind(this)),i(document).on("change","#billing_state, #shipping_state",this.populateCitiesDropdown.bind(this)),i(document).on("change","#_billing_city, #_shipping_city",this.populateDistrictsDropdown.bind(this)),i(document).on("change","#_billing_district, #_shipping_district",this.fillCityField.bind(this)),i("#billing_country, #shipping_country").trigger("change"))},createFields(){let e=document.querySelectorAll("#billing_city, #shipping_city");for(let n of e){let e="billing_city"==n.getAttribute("id")?"billing":"shipping",o=n.closest(".woocommerce-billing-fields, .woocommerce-shipping-fields"),l=n.closest("#billing_city_field, #shipping_city_field"),r=o.querySelector("#billing_state, #shipping_state").value;r=r||"0";let s=n.value.match(/\[(\d+)\]/);s=s?s[1]:"0",t.get(wcisLocalize.WCIS_API+`/fields/${e}/${r}/${s}`).then(e=>{i(l).after(e)})}},toggleCityField(i){let e=i.currentTarget.closest(".woocommerce-billing-fields, .woocommerce-shipping-fields"),t=e.querySelector("#billing_city_field, #shipping_city_field"),n=e.querySelector("#_billing_city_field, #_shipping_city_field"),o=e.querySelector("#_billing_district_field, #_shipping_district_field");"ID"==i.currentTarget.value?(t.classList.add("wcis-form-row-hidden"),n&&n.classList.remove("wcis-form-row-hidden"),o&&o.classList.remove("wcis-form-row-hidden")):(t.classList.remove("wcis-form-row-hidden"),n&&n.classList.add("wcis-form-row-hidden"),o&&o.classList.add("wcis-form-row-hidden"))},populateCitiesDropdown(e){let n=i(e.currentTarget).val()||"0",o=i(e.currentTarget).closest(".woocommerce-billing-fields, .woocommerce-shipping-fields");if(!this.isFirstRun){o.find("#billing_city_field, #shipping_city_field").find("input").val("")}let l=o.find("#_billing_city_field select, #_shipping_city_field select");l.html("<option>Loading...</option>"),o.find("#_billing_district_field select, #_shipping_district_field select").html("<option>Pilih Kota terlebih dahulu...</option>"),t.get(wcisLocalize.WCIS_API+"/cities/"+n).then(i=>{let e="";for(let t in i)e+=`<option value="${t}">${i[t]}</option>`;l.html(e)}),this.isFirstRun=!1},populateDistrictsDropdown(e){let n=i(e.currentTarget).val(),o=i(e.currentTarget).closest(".woocommerce-billing-fields, .woocommerce-shipping-fields"),l=o.find("#billing_state, #shipping_state").val(),r=o.find("#_billing_district_field select, #_shipping_district_field select");r.html("<option>Loading...</option>"),t.get(wcisLocalize.WCIS_API+"/districts/"+l+"/"+n).then(i=>{let e="";for(let t in i)e+=`<option value="${t}">${i[t]}</option>`;r.html(e)})},fillCityField(e){let t=i(e.currentTarget),n=t.closest(".woocommerce-billing-fields, .woocommerce-shipping-fields").find("#billing_city, #shipping_city");n.val(t.val()),n.trigger("keydown")}},t={get(i){return window.fetch(i,{method:"GET",headers:{Accept:"application/json"}}).then(this._handleError).then(this._handleContentType).catch(this._throwError)},post(i,e){return window.fetch(i,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(this._handleError).then(this._handleContentType).catch(this._throwError)},_handleError:i=>i.ok?i:Promise.reject(i.statusText),_handleContentType(i){const e=i.headers.get("content-type");return e&&e.includes("application/json")?i.json():Promise.reject("Oops, we haven't got JSON!")},_throwError(i){throw new Error(i)}}}(jQuery)},function(i,e,t){}]);